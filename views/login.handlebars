{{#extend "main"}}

{{#content "body"}}
<div class="row">
    <div class="col-md-6 offset-md-3">
        <h2 class="my-4 text-center">Login</h2>
        {{#if error}}
            <div class="alert alert-danger" role="alert">
                {{error}}
            </div>
        {{/if}}
        <form id="login-form">
            <div class="form-group">
                <label for="email">Email address</label>
                <input type="email" class="form-control" id="email-login" aria-describedby="emailHelp" placeholder="Enter email" required>
                <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" class="form-control" id="password-login" placeholder="Password" required>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        <p class="mt-3">Don't have an account? <a href="/signup">Sign up</a></p>
    </div>
</div>
<script>
    $(document).ready(function() {
        $('#login-form').on('submit', function(event) {
            event.preventDefault();
            const userData = {
                email: $('#email-login').val().trim(),
                password: $('#password-login').val().trim(),
            };
            $.ajax({
                type: 'POST',
                url: '/api/users/login',
                data: userData,
                success: function() {
                    window.location.replace('/dashboard');
                },
                error: function(err) {
                    alert('Login failed. Please check your credentials and try again.');
                }
            });
        });
    });
</script>
{{/content}}

{{/extend}}
